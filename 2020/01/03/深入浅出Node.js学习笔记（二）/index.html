<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>深入浅出Node.js学习笔记（二）.md | BleakNight's Blog</title><meta name="description" content="深入浅出Node.js学习笔记（二）.md"><meta name="keywords" content="Node"><meta name="author" content="BleakNight"><meta name="copyright" content="BleakNight"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="深入浅出Node.js学习笔记（二）.md"><meta name="twitter:description" content="深入浅出Node.js学习笔记（二）.md"><meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/9931194-c2f908f112927929.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:type" content="article"><meta property="og:title" content="深入浅出Node.js学习笔记（二）.md"><meta property="og:url" content="https://bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"><meta property="og:site_name" content="BleakNight's Blog"><meta property="og:description" content="深入浅出Node.js学习笔记（二）.md"><meta property="og:image" content="https://upload-images.jianshu.io/upload_images/9931194-c2f908f112927929.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"><link rel="prev" title="深入浅出Node.js学习笔记（三）``" href="/https:/bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/"><link rel="next" title="深入浅出Node.js学习笔记（一）" href="/https:/bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">BleakNight's Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">7</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#深入浅出Node-js学习笔记（二）-md"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">深入浅出Node.js学习笔记（二）.md</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#模块机制"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">模块机制</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-CommonJS规范"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">1.CommonJS规范</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1CommonJS的出发点"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">1.1CommonJS的出发点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2CommonJS的模块规范"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">1.2CommonJS的模块规范</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-Node的模块实现"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">2.Node的模块实现</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1优先从缓存加载"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">2.1优先从缓存加载</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2路径分析和文件定位"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">2.2路径分析和文件定位</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-3模块编译"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">2.3模块编译</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-核心模块"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">3.核心模块</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1JavaScript核心模块的编译过程"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">3.1JavaScript核心模块的编译过程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2C-C-核心模块的编译过程"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">3.2C/C++核心模块的编译过程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3核心模块的引入流程"><span class="toc_mobile_items-number">1.4.3.</span> <span class="toc_mobile_items-text">3.3核心模块的引入流程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-4编写核心模块"><span class="toc_mobile_items-number">1.4.4.</span> <span class="toc_mobile_items-text">3.4编写核心模块</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-C-C-扩展模块"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">4.C/C++扩展模块</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1前提条件"><span class="toc_mobile_items-number">1.5.1.</span> <span class="toc_mobile_items-text">4.1前提条件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2C-C-扩展模块的编写"><span class="toc_mobile_items-number">1.5.2.</span> <span class="toc_mobile_items-text">4.2C/C++扩展模块的编写</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3C-C-扩展模块的编译"><span class="toc_mobile_items-number">1.5.3.</span> <span class="toc_mobile_items-text">4.3C/C++扩展模块的编译</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4C-C-扩展模块的加载"><span class="toc_mobile_items-number">1.5.4.</span> <span class="toc_mobile_items-text">4.4C/C++扩展模块的加载</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-模块调用栈"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">5.模块调用栈</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-包与NPM"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">6.包与NPM</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-1包结构"><span class="toc_mobile_items-number">1.7.1.</span> <span class="toc_mobile_items-text">6.1包结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-2包描述文件和NPM"><span class="toc_mobile_items-number">1.7.2.</span> <span class="toc_mobile_items-text">6.2包描述文件和NPM</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-3NPM常用功能"><span class="toc_mobile_items-number">1.7.3.</span> <span class="toc_mobile_items-text">6.3NPM常用功能</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-4局域NPM"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">6.4局域NPM</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-5NPM潜在问题"><span class="toc_mobile_items-number">1.8.1.</span> <span class="toc_mobile_items-text">6.5NPM潜在问题</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#7-前后端共用模块"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">7.前后端共用模块</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-1模块的侧重点"><span class="toc_mobile_items-number">1.9.1.</span> <span class="toc_mobile_items-text">7.1模块的侧重点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-2AMD规范"><span class="toc_mobile_items-number">1.9.2.</span> <span class="toc_mobile_items-text">7.2AMD规范</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-3CMD规范"><span class="toc_mobile_items-number">1.9.3.</span> <span class="toc_mobile_items-text">7.3CMD规范</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-4兼容多种模块规范"><span class="toc_mobile_items-number">1.9.4.</span> <span class="toc_mobile_items-text">7.4兼容多种模块规范</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#深入浅出Node-js学习笔记（二）-md"><span class="toc-number">1.</span> <span class="toc-text">深入浅出Node.js学习笔记（二）.md</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模块机制"><span class="toc-number">1.1.</span> <span class="toc-text">模块机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-CommonJS规范"><span class="toc-number">1.2.</span> <span class="toc-text">1.CommonJS规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1CommonJS的出发点"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.1CommonJS的出发点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2CommonJS的模块规范"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2CommonJS的模块规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Node的模块实现"><span class="toc-number">1.3.</span> <span class="toc-text">2.Node的模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1优先从缓存加载"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.1优先从缓存加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2路径分析和文件定位"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2路径分析和文件定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3模块编译"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.3模块编译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-核心模块"><span class="toc-number">1.4.</span> <span class="toc-text">3.核心模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1JavaScript核心模块的编译过程"><span class="toc-number">1.4.1.</span> <span class="toc-text">3.1JavaScript核心模块的编译过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2C-C-核心模块的编译过程"><span class="toc-number">1.4.2.</span> <span class="toc-text">3.2C/C++核心模块的编译过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3核心模块的引入流程"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.3核心模块的引入流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4编写核心模块"><span class="toc-number">1.4.4.</span> <span class="toc-text">3.4编写核心模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-C-C-扩展模块"><span class="toc-number">1.5.</span> <span class="toc-text">4.C/C++扩展模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1前提条件"><span class="toc-number">1.5.1.</span> <span class="toc-text">4.1前提条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2C-C-扩展模块的编写"><span class="toc-number">1.5.2.</span> <span class="toc-text">4.2C/C++扩展模块的编写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3C-C-扩展模块的编译"><span class="toc-number">1.5.3.</span> <span class="toc-text">4.3C/C++扩展模块的编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4C-C-扩展模块的加载"><span class="toc-number">1.5.4.</span> <span class="toc-text">4.4C/C++扩展模块的加载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-模块调用栈"><span class="toc-number">1.6.</span> <span class="toc-text">5.模块调用栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-包与NPM"><span class="toc-number">1.7.</span> <span class="toc-text">6.包与NPM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1包结构"><span class="toc-number">1.7.1.</span> <span class="toc-text">6.1包结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2包描述文件和NPM"><span class="toc-number">1.7.2.</span> <span class="toc-text">6.2包描述文件和NPM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3NPM常用功能"><span class="toc-number">1.7.3.</span> <span class="toc-text">6.3NPM常用功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4局域NPM"><span class="toc-number">1.8.</span> <span class="toc-text">6.4局域NPM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5NPM潜在问题"><span class="toc-number">1.8.1.</span> <span class="toc-text">6.5NPM潜在问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-前后端共用模块"><span class="toc-number">1.9.</span> <span class="toc-text">7.前后端共用模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1模块的侧重点"><span class="toc-number">1.9.1.</span> <span class="toc-text">7.1模块的侧重点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2AMD规范"><span class="toc-number">1.9.2.</span> <span class="toc-text">7.2AMD规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3CMD规范"><span class="toc-number">1.9.3.</span> <span class="toc-text">7.3CMD规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4兼容多种模块规范"><span class="toc-number">1.9.4.</span> <span class="toc-text">7.4兼容多种模块规范</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://upload-images.jianshu.io/upload_images/9931194-c2f908f112927929.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)"><div id="post-info"><div id="post-title"><div class="posttitle">深入浅出Node.js学习笔记（二）.md</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-01-03<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-01-03</time><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="深入浅出Node-js学习笔记（二）-md"><a href="#深入浅出Node-js学习笔记（二）-md" class="headerlink" title="深入浅出Node.js学习笔记（二）.md"></a>深入浅出Node.js学习笔记（二）.md</h1><h2 id="模块机制"><a href="#模块机制" class="headerlink" title="模块机制"></a>模块机制</h2><p>Web1.0时代，JavaScript脚本语言的两个主要功能：</p>
<ol>
<li>表单验证；</li>
<li>网页特效；</li>
</ol>
<p>Web2.0时代，前端工程师利用JavaScript大大提升了网页的用户体验，经历了工具类库、组件库、前端框架、前端应用的变迁。</p>
<p>JavaScript的先天缺陷：<strong>模块</strong>。</p>
<p>高级语言的模块化机制：</p>
<ol>
<li>Java-类文件；</li>
<li>Python-import机制；</li>
<li>Ruby-require;</li>
<li>PHP-include和require;</li>
</ol>
<h2 id="1-CommonJS规范"><a href="#1-CommonJS规范" class="headerlink" title="1.CommonJS规范"></a>1.CommonJS规范</h2><p>commonJS的愿景：希望JavaScript能够在任何地方运行。</p>
<h3 id="1-1CommonJS的出发点"><a href="#1-1CommonJS的出发点" class="headerlink" title="1.1CommonJS的出发点"></a>1.1CommonJS的出发点</h3><p>JavaScript规范的缺陷：</p>
<ol>
<li>没有模块系统；</li>
<li>标准库较少；</li>
<li>没有标准接口；</li>
<li>缺乏包管理系统；</li>
</ol>
<p>CommonJS规范中，CommonJSAPI可以编写的应用：</p>
<ol>
<li>服务端JavaScript应用程序；</li>
<li>命令行工具；</li>
<li>桌面图形界面应用程序；</li>
<li>混合应用；</li>
</ol>
<h3 id="1-2CommonJS的模块规范"><a href="#1-2CommonJS的模块规范" class="headerlink" title="1.2CommonJS的模块规范"></a>1.2CommonJS的模块规范</h3><ol>
<li><p><strong>模块引用</strong></p>
<p>采用require()方法；</p>
<pre><code>var math = require(&#39;math&#39;);</code></pre></li>
<li><p><strong>模块定义</strong></p>
<p>require():用来引入外部模块；</p>
<p>exports:导出模块的方法或变量，唯一导出的出口；</p>
<p>module:代表模块自身；</p>
<pre><code>// math.js
exports.add = function (){
    var sum = 0,
    i = 0,
    args = arguments,
    l = args.lenght;
    while(i&lt;l){
        sum += args[i++];
    }
    return sum;
}

//program.js
var math = require(&quot;math&quot;);
exports.increment = function (val){
    return math.add(val,1);
}</code></pre></li>
</ol>
<ol start="3">
<li><p><strong>模块标识</strong></p>
<p>模块标识：</p>
<p>就是传递给require()方法的参数，符合小驼峰命名的字符串，或者以<strong>.</strong>、<strong>..</strong>开头的相对路径或绝对路径，可以没有后缀.js。</p>
</li>
</ol>
<h2 id="2-Node的模块实现"><a href="#2-Node的模块实现" class="headerlink" title="2.Node的模块实现"></a>2.Node的模块实现</h2><p>Node中引入模块经历的三个步骤:</p>
<ol>
<li>路径分析；</li>
<li>文件定位；</li>
<li>编译执行；</li>
</ol>
<p>Node中，模块分为两种：</p>
<ol>
<li><p>核心模块(Node提供的模块)；</p>
<p>核心模块部分在Node源代码的编译过程中，编译了二进制执行文件。在Node进程启动时，部分核心模块被直接加载进内存中，所以这部分核心模块引入时，文件定位和编译执行两个步骤可以省略掉，并且在路径分析中优先判断，它的加载速度是最快的。</p>
</li>
<li><p>文件模块(用户编写的模块)；</p>
<p>文件模块在运行时动态加载，需要完整的路径分析、文件定位、编译执行过程，速度比核心模块慢。</p>
</li>
</ol>
<h3 id="2-1优先从缓存加载"><a href="#2-1优先从缓存加载" class="headerlink" title="2.1优先从缓存加载"></a>2.1优先从缓存加载</h3><p>与前端浏览器会缓存静态脚本文件以提高性能一样，Node对引入过的模块都会进行缓存，以减少二次引入的开销。不同的是，浏览器仅缓存文件，而Node缓存的是编译和执行后的对象。</p>
<p>不论是核心模块还是文件模块，require()方法对相同模块的二次加载都一律采用缓存优先的方式，这是<strong>第一优先级</strong>的。不同之处在于核心模块的缓存检查先于文件模块的缓存检查。</p>
<h3 id="2-2路径分析和文件定位"><a href="#2-2路径分析和文件定位" class="headerlink" title="2.2路径分析和文件定位"></a>2.2路径分析和文件定位</h3><ol>
<li><p><strong>模块标识符分析</strong></p>
<p>模块标识符在Node中的分类：</p>
<ol>
<li>核心模块，如http、fs、path等；</li>
<li><strong>.</strong>或<strong>..</strong>开始的相对路径文件模块；</li>
<li>以/开始的绝对文件模块；</li>
<li>非路径形式的文件模块，如自定义的connect模块；</li>
</ol>
<p><strong>核心模块</strong></p>
<p>核心模块的优先级仅次于缓存加载，在Node的源代码编译过程中，已经编译为二进制代码了，其加载过程最快。</p>
<p><strong>路径形式的文件模块</strong></p>
<p>在分析路径模块时，require()将路径转化为真实路径，以真实路径作为索引，将编译执行后的结果放在缓存中，以使二次加载更快，其加载速度慢于核心模块。</p>
<p><strong>自定义模块</strong></p>
<p>这类模块的查找最费时，也是所有方式最慢的一种。</p>
<p>模块路径：</p>
<p>Node在定位文件模块的具体文件时制定的查找策略，具体表现为一个路径组成的数组。</p>
</li>
<li><p><strong>文件定位</strong></p>
<p>从缓存加载的优化策略使得二次引入时不需要路径分析、文件定位和编译执行的过程，大大提高了再次加载模块时的效率。</p>
<p>文件定位过程中，需要注意的细节,包括文件扩展名的分析、目录和包的处理。</p>
<p><strong>文件扩展名分析</strong></p>
<p>require()在分析标识符的过程中，出现标识符中不包含文件扩展名的情况，Node会按.js、.json、.node的次序补足扩展名，依次尝试。</p>
<p>在尝试的过程中，需要调用fs模块同步阻塞式低判断文件是否存在。</p>
<p><strong>目录分析和包</strong></p>
<p>在分析标识的过程中，require()通过分析文件扩展名之后，可能没有查找到对应的文件，但却得到一个目录，此时Node会将目录当做一个包来处理。</p>
</li>
</ol>
<h3 id="2-3模块编译"><a href="#2-3模块编译" class="headerlink" title="2.3模块编译"></a>2.3模块编译</h3><p>在Node中，每个文件模块都是一个对象。</p>
<p>编译和执行时引入文件模块的最后一个阶段。定位到具体的文件后，Node会新建一个模块对象，然后根据路径载入并编译。对于不同的文件扩展名，载入方法也有所不同。</p>
<ul>
<li>.js文件；通过fs模块同步读取文件后编译执行。</li>
<li>.node文件；这是用C/C++编写的扩展文件，通过dlopen()方法加载最后编译生成的文件。</li>
<li>.json文件；通过fs模块同步读取文件后，用JSON.parse()解析返回结果。</li>
<li>其余扩展名文件；都被当做.js文件载入。</li>
</ul>
<h2 id="3-核心模块"><a href="#3-核心模块" class="headerlink" title="3.核心模块"></a>3.核心模块</h2><p>核心模块分为两部分：</p>
<ol>
<li>C/C++编写的部分；</li>
<li>JavaScript编写的部分；</li>
</ol>
<h3 id="3-1JavaScript核心模块的编译过程"><a href="#3-1JavaScript核心模块的编译过程" class="headerlink" title="3.1JavaScript核心模块的编译过程"></a>3.1JavaScript核心模块的编译过程</h3><p>JavaScript核心模块的编译过程：</p>
<ol>
<li><p>转存为C/C++代码；</p>
<p>在此过程中，JavaScript代码已字符串的形式存储在Node的命名空间中，是不可直接执行的。在启动Node进程时，JavaScript代码直接加载进内存中。在加载的过程中，JavaScript核心模块经历标识符分析后，直接定位到内存中，比普通的文件模块从磁盘中一处一处查找要快得多。</p>
</li>
<li><p>编译JavaScript核心模块；</p>
<p>在引入JavaScript核心模块的过程中，也经历了头尾包装的过程，然后才执行和导出exports对象。与文件模块区别的地方在于：获取源码的方式(核心模块从内存中加载)以及缓存执行结果的位置。</p>
</li>
</ol>
<h3 id="3-2C-C-核心模块的编译过程"><a href="#3-2C-C-核心模块的编译过程" class="headerlink" title="3.2C/C++核心模块的编译过程"></a>3.2C/C++核心模块的编译过程</h3><p>C/C++模块主内完成核心，JavaScript主外实现封装的模式是Node能够提高性能的常见方式。</p>
<ol>
<li><p>内建模块的组织形式；</p>
<p>内建模块的优势：</p>
<ol>
<li>C/C++编写，性能优于脚本语言；</li>
<li>在进行文件编译时，被编译二进制文件。一旦Node开始执行，直接被加载进内存，无须再次做标识定位，文件定位，编译等过程，直接可执行。</li>
</ol>
</li>
<li><p>内建模块的导出；</p>
<p>在Node的所有模块类型中，存在一种依赖层级关系：</p>
<p>文件模块可能依赖核心模块，核心模块可能依赖内建模块。</p>
</li>
</ol>
<h3 id="3-3核心模块的引入流程"><a href="#3-3核心模块的引入流程" class="headerlink" title="3.3核心模块的引入流程"></a>3.3核心模块的引入流程</h3><p>核心模块的引入流程经历了C/C++层面的内建模块的定义，(JavaScript)核心模块的定义和引入以及(JavaScript)文件模块层面的引入。</p>
<h3 id="3-4编写核心模块"><a href="#3-4编写核心模块" class="headerlink" title="3.4编写核心模块"></a>3.4编写核心模块</h3><p>核心模块被编译进二进制文件需要遵循一定规则。作为Node的使用者，几乎没有机会参与核心模块的开发。</p>
<h2 id="4-C-C-扩展模块"><a href="#4-C-C-扩展模块" class="headerlink" title="4.C/C++扩展模块"></a>4.C/C++扩展模块</h2><p>JavaScript的一个典型的弱点就是位运算。</p>
<p>在JavaScript应用中，会频繁出现位运算的需求，包括转换、编码等过程，通过JavaScript实现，CPU资源会耗费很多。</p>
<h3 id="4-1前提条件"><a href="#4-1前提条件" class="headerlink" title="4.1前提条件"></a>4.1前提条件</h3><ol>
<li>GYP项目生成工具；</li>
<li>V8引擎C++库；</li>
<li>libux库；</li>
<li>Node内部库；</li>
<li>其他库；</li>
</ol>
<h3 id="4-2C-C-扩展模块的编写"><a href="#4-2C-C-扩展模块的编写" class="headerlink" title="4.2C/C++扩展模块的编写"></a>4.2C/C++扩展模块的编写</h3><p>普通的扩展模块与内建模块的区别在于无须将源代码编译进Node，而是通过dlopen()方式动态加载。</p>
<h3 id="4-3C-C-扩展模块的编译"><a href="#4-3C-C-扩展模块的编译" class="headerlink" title="4.3C/C++扩展模块的编译"></a>4.3C/C++扩展模块的编译</h3><p>通过GYP工具实现。</p>
<h3 id="4-4C-C-扩展模块的加载"><a href="#4-4C-C-扩展模块的加载" class="headerlink" title="4.4C/C++扩展模块的加载"></a>4.4C/C++扩展模块的加载</h3><p>require()方法通过解析标识符、路径分析、文件定位，然后加载执行即可。</p>
<p>C/C++扩展模块与JavaScript模块的区别在于加载之后不需要编译，子类执行之后就可以被外部调用了，其加载速度比JavaScript模块速度略快。</p>
<p>使用C/C++扩展模块的一个好处在于可以更加灵活和动态地加载它们，保持Node模块自身简单性的同时，给予Node五=无限的可能性。</p>
<h2 id="5-模块调用栈"><a href="#5-模块调用栈" class="headerlink" title="5.模块调用栈"></a>5.模块调用栈</h2><p>C/C++内建模块：属于最底层的模块，属于核心模块，主要通过API给JavaScript核心模块和第三方JavaScript文件模块的调用。</p>
<p>JavaScript核心模块的两个职责：</p>
<ol>
<li>作为C/C++内建模块的封装层和桥接层，供文件模块调用；</li>
<li>纯粹的功能模块，不需要和底层打交道；</li>
</ol>
<p>文件模块：通常由第三方编写，包括普通JavaScript模块的C/C++扩展模块，主要调用方向为普通JavaScript模块调用扩展模块。</p>
<p><img alt="image-20191230165445878" data-src="C:%5CUsers%5Czhoub%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191230165445878.png" class="lazyload"></p>
<h2 id="6-包与NPM"><a href="#6-包与NPM" class="headerlink" title="6.包与NPM"></a>6.包与NPM</h2><p>包和NPM是将模块联系起来的一种机制。</p>
<p>包组织模块示意图：</p>
<p><img alt="image-20191230170132889" data-src="C:%5CUsers%5Czhoub%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191230170132889.png" class="lazyload"></p>
<p>CommonJS包的定义：</p>
<p>由包结构和包描述文件两个部分组成，前者用于组织包中的各种文件，后者用于描述包的相关信息，以供外部读取分析。</p>
<h3 id="6-1包结构"><a href="#6-1包结构" class="headerlink" title="6.1包结构"></a>6.1包结构</h3><p>包实际是一个存档文件，即一个目录直接打包为.zip和tar.gz格式的文件，安装后解压还原为目录。</p>
<p>包目录包含的文件：</p>
<ol>
<li>package.json:包描述文件；</li>
<li>bin:用于存放可执行二进制文件的目录；</li>
<li>lib:用于存放JavaScript代码的目录；</li>
<li>doc:用于存放文档的目录；</li>
<li>test:用于存放单元测试用例的代码；</li>
</ol>
<h3 id="6-2包描述文件和NPM"><a href="#6-2包描述文件和NPM" class="headerlink" title="6.2包描述文件和NPM"></a>6.2包描述文件和NPM</h3><p>包描述文件用于表达非代码相关的信息，是个JSON格式的文件-package.json，位于包的根目录下，是包的重要组成部分。</p>
<h3 id="6-3NPM常用功能"><a href="#6-3NPM常用功能" class="headerlink" title="6.3NPM常用功能"></a>6.3NPM常用功能</h3><p>对于Node而言，NPM帮助完成了第三方模块的发布、安装和依赖等。借助Node与第三方模块之间形成了很好的一个生态系统。</p>
<ol>
<li><p>查看帮助；</p>
<p>查看当前NPM版本：</p>
<pre><code>$ npm -v</code></pre><p>查看帮助：</p>
<pre><code>$ npm</code></pre></li>
<li><p>安装依赖包</p>
<p>安装依赖包是NPM最常见的用法，执行语句：</p>
<pre><code>$ npm install express</code></pre><p><strong>1.全局模式安装</strong></p>
<pre><code>$ npm install express -g</code></pre><p><strong>2.从本地安装</strong></p>
<p>本地安装只需为NPM指明package.json文件的所在的位置即可。它可以是一个包含package.json的存档文件，也可以是个URL地址，也可以是个目录有package.json的目录的位置。</p>
<p><strong>3.从非官方源安装</strong></p>
<p>从非官方安装，可以通过镜像源安装。</p>
<pre><code>$ npm config set underscore --registry=http://registry.url</code></pre><p>镜像源安装指定默认源：</p>
<pre><code>$ npm config set registry http://registry.url</code></pre></li>
<li><p>NPM钩子命令</p>
<p>C/C++模块实际上是编译后才能使用的。package.json中script字段的提出就是让包在安装或者卸载等过程中提供钩子机制。</p>
</li>
<li><p>发布包</p>
<ol>
<li><p>编写模块；</p>
</li>
<li><p>初始化包描述文件；</p>
<pre><code>$ npm init</code></pre></li>
<li><p>注册包仓库账号</p>
<pre><code>$ npm adduser</code></pre></li>
<li><p>上传包</p>
<pre><code>$ npm publish .</code></pre></li>
<li><p>安装包</p>
<pre><code>$ npm install hello_test_jackson --registy=http://npmjs.org</code></pre></li>
<li><p>管理包权限</p>
<p>多人进行发布</p>
<pre><code>$ npm owner ls eventproxy</code></pre></li>
</ol>
</li>
<li><p>分析包</p>
<p>在使用NPM的过程中，或许你不能确认当前目录下能否通过require()顺利引入想要的包，执行npm ls分析包。</p>
<pre><code>$ npm ls</code></pre></li>
</ol>
<h2 id="6-4局域NPM"><a href="#6-4局域NPM" class="headerlink" title="6.4局域NPM"></a>6.4局域NPM</h2><p>为了同时能够享受NPM上众多的包，同时对自己的包进行保密和限制，现有的解决方案就是企业搭建自己的NPM仓库。</p>
<p>企业混合使用官方仓库和局域仓库的示意图：</p>
<p><img alt="image-20191230183003521" data-src="C:%5CUsers%5Czhoub%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191230183003521.png" class="lazyload"></p>
<p>对于企业内部而言，私有的可重用模块可以打包到局域NPM仓库，这样可以保持更新的中心化，不至于让各个小项目各自维护相同功能的模块，杜绝通过复制粘贴实现代码共享的行为。</p>
<h3 id="6-5NPM潜在问题"><a href="#6-5NPM潜在问题" class="headerlink" title="6.5NPM潜在问题"></a>6.5NPM潜在问题</h3><p>NPM的潜在问题：</p>
<ol>
<li>每个人都可以分享包平台上，鉴于开发人员水平不一，上面的包的质量也良莠不齐；</li>
<li>Node代码可以运行在服务器端，需要考虑安全问题；</li>
</ol>
<p>对于包的使用者而言，包质量和安全问题需要作为是否采纳模块的一个判断条件。</p>
<p>如何评判一个包的安全和质量？</p>
<ol>
<li>开源社区内在的健康发展机制-口碑效应；</li>
<li>Github中，模块项目的观察者数量和分支数量；</li>
<li>包中测试用例和文档的状况；</li>
</ol>
<p>Kwalitee模块的考察点：</p>
<ol>
<li>具备良好的测试；</li>
<li>具备良好的文档(README、API)；</li>
<li>具备良好的测试覆盖率；</li>
<li>具备良好的编码规范；</li>
<li>更多条件；</li>
</ol>
<h2 id="7-前后端共用模块"><a href="#7-前后端共用模块" class="headerlink" title="7.前后端共用模块"></a>7.前后端共用模块</h2><h3 id="7-1模块的侧重点"><a href="#7-1模块的侧重点" class="headerlink" title="7.1模块的侧重点"></a>7.1模块的侧重点</h3><p>前后端JavaScript分别搁置在HTTP的两端，它们扮演的角色并不同。</p>
<p>浏览器端的JavaScript：</p>
<p>需要经历从同一个服务器端分发到多个客户端执行，瓶颈在于带宽，需要网络加载代码；</p>
<p>浏览器端的JavaScript：</p>
<p>相同的代码需要多次执行，瓶颈在于CPU和内存等资源，从磁盘中加载代码；</p>
<p>两者的加载的速度不在一个数量级别。</p>
<p>CommonJS为后端JavaScript制定的规范；</p>
<p>AMD为前端JavaScript制定的规范；</p>
<h3 id="7-2AMD规范"><a href="#7-2AMD规范" class="headerlink" title="7.2AMD规范"></a>7.2AMD规范</h3><p>AMD规范是CommonJS模块规范的一个延伸，定义如下;</p>
<pre><code>define(id?,dependenceies?,factory)</code></pre><p>模块的id和依赖是可选的，</p>
<p>与Node模块相似之处：</p>
<p>factory的内容就是实际代码的内容；</p>
<p>与Node模块不同之处：</p>
<ol>
<li>AMD需要define定义一个模块,Node实现中是隐式包装的；</li>
<li>内容需要通过返回的方式实现导出；</li>
</ol>
<h3 id="7-3CMD规范"><a href="#7-3CMD规范" class="headerlink" title="7.3CMD规范"></a>7.3CMD规范</h3><p>CMD规范由国内的玉伯提出，与AMD规范的主要区别在于定义模块和依赖引入的部分。</p>
<p>AMD需要在声明模块的时候指定所有的依赖，通过形参传递到模块内容；</p>
<pre><code>define([&#39;dep1&#39;,&#39;dep2&#39;],function (dep1,dep2){
    return function (){};
})</code></pre><h3 id="7-4兼容多种模块规范"><a href="#7-4兼容多种模块规范" class="headerlink" title="7.4兼容多种模块规范"></a>7.4兼容多种模块规范</h3><p>为了让同一个模块可以运行在前后端，需要考虑兼容前端也实现了模块规范的环境。为了保持前后端的一致性，类库开发者需要将类库代码包装在一个闭包内。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">BleakNight</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="/https:/bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/">https://bleaknight95.github.io/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://bleaknight95.github.io">BleakNight's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Node/">Node    </a></div><div class="post_share"><div class="social-share" data-image="https://upload-images.jianshu.io/upload_images/9931194-c2f908f112927929.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/"><img class="prev_cover lazyload" data-src="https://upload-images.jianshu.io/upload_images/9931194-a330ce584d53c6c3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>深入浅出Node.js学习笔记（三）``</span></div></a></div><div class="next-post pull_right"><a href="/2020/01/03/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BANode.js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"><img class="next_cover lazyload" data-src="https://upload-images.jianshu.io/upload_images/9931194-08abd29fb32200c9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>深入浅出Node.js学习笔记（一）</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/01/03/深入浅出Node.js学习笔记（一）/" title="深入浅出Node.js学习笔记（一）"><img class="relatedPosts_cover lazyload"data-src="https://upload-images.jianshu.io/upload_images/9931194-08abd29fb32200c9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><div class="relatedPosts_title">深入浅出Node.js学习笔记（一）</div></a></div><div class="relatedPosts_item"><a href="/2020/01/03/深入浅出Node.js学习笔记（三）/" title="深入浅出Node.js学习笔记（三）``"><img class="relatedPosts_cover lazyload"data-src="https://upload-images.jianshu.io/upload_images/9931194-a330ce584d53c6c3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><div class="relatedPosts_title">深入浅出Node.js学习笔记（三）``</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80Nzc5MS8yNDI4OA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By BleakNight</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png"><span>© 2019 BleakNight All rights Resved 浙ICP备18005439号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/baidupush.js"> </script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script></body></html>